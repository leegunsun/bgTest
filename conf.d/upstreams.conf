# NGINX Upstream Configuration for Single Environment Mode (t2.micro optimized)
# Container-based networking for green-only deployment

# Blue environment disabled for t2.micro resource optimization
# upstream blue {
#     server blue-app:3001 max_fails=3 fail_timeout=30s;
#     keepalive 32;
#     keepalive_requests 100;
#     keepalive_timeout 60s;
# }

upstream green {
    server green-app:3002 max_fails=3 fail_timeout=30s;
    keepalive 32;
    keepalive_requests 100;
    keepalive_timeout 60s;
}

# Fallback upstream for error handling - green only
upstream fallback {
    server green-app:3002;
    keepalive 16;
}